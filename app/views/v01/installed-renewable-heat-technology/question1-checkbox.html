{% extends "layouts/main.html" %}

{% block content %}

<style>
    .govuk-fieldset__heading {
        margin-top: 16px;
    }
</style>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters">

        <a href="javascript:history.back()" class="govuk-back-link">Back</a>

        <div id="error-container"></div>

        <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" aria-describedby="waste-hint">
              <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h1 class="govuk-fieldset__heading">
                  Which type of waste do you transport?
                </h1>
              </legend>
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="waste" name="waste" type="checkbox" value="carcasses">
                  <label class="govuk-label govuk-checkboxes__label" for="waste">
                   Air source heat pump
                  </label>
                </div>
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="waste-2" name="waste" type="checkbox" value="mines">
                  <label class="govuk-label govuk-checkboxes__label" for="waste-2">
                    Ground source heat pump
                  </label>
                </div>
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="waste-3" name="waste" type="checkbox" value="farm">
                  <label class="govuk-label govuk-checkboxes__label" for="waste-3">
                    Biomass boiler
                  </label>
                </div>
              </div>
            </fieldset>
          </div>

        <button type="button" class="govuk-button" data-module="govuk-button" onclick="navigateBasedOnSelection()">
            Save and continue
        </button>

        <p class="govuk-body">
            <a href="/v01/complete-questionnaire/third-section-incomplete.html" class="govuk-link govuk-link--no-visited-state">Finish later</a>
        </p>

    </div>
</div>

<script>  
  function navigateBasedOnSelection() {  
      const errorContainer = document.getElementById('error-container'); 
      const errorIndicator = document.getElementById('error-indicator');
      const existingErrorSummary = document.getElementById('error-summary');  
      const errorMessage = document.getElementById('radio-error-message');  

      if (existingErrorSummary) {  
          existingErrorSummary.remove(); 
      }  

      if (errorMessage) {  
            errorMessage.style.display = 'none';  
          }

      const selectedOption = document.querySelector('input[name="waste"]:checked');  
      if (selectedOption) {  
          if (selectedOption.value === "carcasses"||selectedOption.value === "mines" ||selectedOption.value === "farm" ) {  
              window.location.href = "question2-number.html";  
          }
      } else {  
          const errorSummary = document.createElement('div');  
          errorSummary.id = 'error-summary';  
          errorSummary.className = 'govuk-error-summary';  
          errorSummary.setAttribute('aria-labelledby', 'error-summary-title');  
          errorSummary.setAttribute('role', 'alert');  
          errorSummary.setAttribute('tabindex', '-1');  
          errorSummary.innerHTML = `  
              <h2 class="govuk-error-summary__title" id="error-summary-title">  
                  There is a problem  
              </h2>  
              <div class="govuk-error-summary__body">  
                  <ul class="govuk-list govuk-error-summary__list">  
                      <li>  
                          <a href="#whereDoYouLive">Select a technology type</a>  
                      </li>  
                  </ul>  
              </div>  
          `;   
          errorContainer.prepend(errorSummary);  
          errorSummary.focus();  

          if (errorMessage) {  
              errorMessage.style.display = 'block';  
              errorIndicator.className = 'govuk-form-group--error govuk-!-margin-bottom-5'; 
          }  
      }  
  }  
</script>

{% endblock %}
